# Test Fixtures - Synthetic API Data

This directory contains canned test data to replace real API calls (Anthropic, Brave Search, article fetching) during testing.

## Files

- `queries/sample_queries.json` - Sample search queries generated by the mock Anthropic API
- `search_results/sample_results.json` - Sample Brave API search results
- `articles/sample_articles.json` - Sample article content from fetched URLs

## Usage

### Enable Fixture Mode

```python
from tests.fixtures import enable_fixtures

# Enable fixture mode - all API calls will use synthetic data
enable_fixtures()
```

### Run Search Agent with Fixtures

```bash
# Run test that uses fixtures
uv run python tests/test_search_agent_with_fixtures.py
```

### Environment Variable

You can also enable fixtures via environment variable:

```bash
DEBATE_FIXTURES=1 uv run python your_test.py
```

## How It Works

When fixture mode is enabled:

1. **Query Generation** - Returns queries from `sample_queries.json` instead of calling Anthropic API
2. **Web Search** - Returns results from `sample_results.json` instead of calling Brave API
3. **Article Fetching** - Returns articles from `sample_articles.json` instead of fetching real URLs

All fixture data is cycled through in order, so repeated tests get different (but still synthetic) data.

## Adding More Fixtures

To add new synthetic data:

1. Add entries to the appropriate JSON file
2. Follow the existing format:
   - `queries/sample_queries.json`: Array of query strings
   - `search_results/sample_results.json`: Array of `{query, urls}` objects
   - `articles/sample_articles.json`: Array of `{url, title, content}` objects

## Benefits

- ✓ Fast tests (no network calls)
- ✓ Reproducible tests (same data each time)
- ✓ No API rate limiting
- ✓ No API key required
- ✓ Tests run offline
- ✓ No real URLs fetched
